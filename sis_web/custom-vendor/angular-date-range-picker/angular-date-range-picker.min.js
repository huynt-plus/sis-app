(function(){angular.module("dateRangePicker",[]);angular.module("dateRangePicker").directive("dateRangePicker",["$compile","$timeout","moment",function(n,t,i){var r,u;return u='<div ng-show="visible" class="angular-date-range-picker__picker" ng-click="handlePickerClick($event)" ng-class="{\'angular-date-range-picker--ranged\': showRanged }">\n  <div class="angular-date-range-picker__timesheet">\n    <a ng-click="move(-1, $event)" class="angular-date-range-picker__prev-month">&#9664;<\/a>\n    <div ng-repeat="month in months" class="angular-date-range-picker__month">\n      <div class="angular-date-range-picker__month-name">{{::month.name}}<\/div>\n      <table class="angular-date-range-picker__calendar">\n        <tr>\n          <th ng-repeat="day in month.weeks[1]" class="angular-date-range-picker__calendar-weekday">{{::dat.date.format(\'dd\')}}<\/th>\n        <\/tr>\n        <tr ng-repeat="week in month.weeks">\n          <td\n              ng-class=\'{\n                "angular-date-range-picker__calendar-day": day,\n                "angular-date-range-picker__calendar-day-selected": day.selected,\n                "angular-date-range-picker__calendar-day-disabled": day.disabled,\n                "angular-date-range-picker__calendar-day-start": day.start\n              }\'\n              ng-repeat="day in week track by $index" ng-click="select(day, $event)">\n              <div class="angular-date-range-picker__calendar-day-wrapper">{{::day.date.date()}}<\/div>\n          <\/td>\n        <\/tr>\n      <\/table>\n    <\/div>\n    <a ng-click="move(+1, $event)" class="angular-date-range-picker__next-month">&#9654;<\/a>\n  <\/div>\n  <div class="angular-date-range-picker__panel">\n    <div ng-show="showRanged">\n      Select range: <select ng-click="prevent_select($event)" ng-model="quick" ng-options="e.range as e.label for e in quickList"><\/select>\n    <\/div>\n    <div class="angular-date-range-picker__buttons">\n      <a ng-click="ok($event)" class="angular-date-range-picker__apply">Apply<\/a>\n      <a ng-click="hide($event)" class="angular-date-range-picker__cancel">cancel<\/a>\n    <\/div>\n  <\/div>\n<\/div>',r="CUSTOM",{restrict:"AE",replace:!0,template:'<span tabindex="0" ng-keydown="hide()" class="angular-date-range-picker__input">\n  <span ng-if="showRanged">\n    <span ng-show="!!model">{{ model.start.format("ll") }} - {{ model.end.format("ll") }}<\/span>\n    <span ng-hide="!!model">Select date range<\/span>\n  <\/span>\n  <span ng-if="!showRanged">\n    <span ng-show="!!model">{{ model.format("ll") }}<\/span>\n    <span ng-hide="!!model">Select date<\/span>\n  <\/span>\n<\/span>',scope:{model:"=ngModel",customSelectOptions:"=",ranged:"=",pastDates:"@",callback:"&",parentEl:"@"},link:function(f,e){var c,l,s,a,h,o;return f.quickListDefinitions=f.customSelectOptions,f.quickListDefinitions==null&&(f.quickListDefinitions=[{label:"This week",range:i().range(i().startOf("week").startOf("day"),i().endOf("week").startOf("day"))},{label:"Next week",range:i().range(i().startOf("week").add(1,"week").startOf("day"),i().add(1,"week").endOf("week").startOf("day"))},{label:"This fortnight",range:i().range(i().startOf("week").startOf("day"),i().add(1,"week").endOf("week").startOf("day"))},{label:"This month",range:i().range(i().startOf("month").startOf("day"),i().endOf("month").startOf("day"))},{label:"Next month",range:i().range(i().startOf("month").add(1,"month").startOf("day"),i().add(1,"month").endOf("month").startOf("day"))}]),f.quick=null,f.range=null,f.selecting=!1,f.visible=!1,f.start=null,f.showRanged=f.ranged===void 0?!0:f.ranged,h=function(n){var e,t,o,i,u;if(n==null&&(n=!1),f.showRanged){for(f.quickList=[],n&&f.quickList.push({label:"Custom",range:r}),i=f.quickListDefinitions,u=[],t=0,o=i.length;t<o;t++)e=i[t],u.push(f.quickList.push(e));return u}},s=function(){var t,n;return f.showRanged?f.range=f.selection?(n=f.selection.start.clone().startOf("month").startOf("day"),t=n.clone().add(2,"months").endOf("month").startOf("day"),i().range(n,t)):i().range(i().startOf("month").subtract(1,"month").startOf("day"),i().endOf("month").add(1,"month").startOf("day")):(f.selection=!1,f.selection=f.model||!1,f.date=i(f.model)||i(),f.range=i().range(i(f.date).startOf("month"),i(f.date).endOf("month")))},a=function(){var n,t,u,i;if(f.showRanged&&f.selection){for(i=f.quickList,t=0,u=i.length;t<u;t++)if(n=i[t],n.range!==r&&f.selection.start.startOf("day").unix()===n.range.start.startOf("day").unix()&&f.selection.end.startOf("day").unix()===n.range.end.startOf("day").unix()){f.quick=n.range;h();return}return f.quick=r,h(!0)}},o=function(){var t,u,e,n,o,r;for(f.months=[],e=f.range.start.year()*12+f.range.start.month(),u=i().startOf("week").day(),f.range.by("days",function(n){var t,s,r,o,h,c,l;return t=n.day()-u,t<0&&(t=7+t),r=n.year()*12+n.month()-e,h=parseInt((7+n.date()-t)/7),o=!1,s=!1,f.showRanged?f.start?(o=n===f.start,s=n<f.start):o=f.selection&&f.selection.contains(n):(o=n.isSame(f.selection),f.pastDates&&(s=i().diff(n,"days")>0)),(c=f.months)[r]||(c[r]={name:n.format("MMMM YYYY"),weeks:[]}),(l=f.months[r].weeks)[h]||(l[h]=[]),f.months[r].weeks[h][t]={date:n,selected:o,disabled:s,start:f.start&&f.start.unix()===n.unix()}}),r=f.months,n=0,o=r.length;n<o;n++)t=r[n],t.weeks[0]||t.weeks.splice(0,1);return a()},f.show=function(){return f.selection=f.model,s(),o(),f.visible=!0},f.hide=function(n){return n!=null&&typeof n.stopPropagation=="function"&&n.stopPropagation(),f.visible=!1,f.start=null},f.prevent_select=function(n){if(n!=null)return typeof n.stopPropagation=="function"?n.stopPropagation():void 0},f.ok=function(n){return n!=null&&typeof n.stopPropagation=="function"&&n.stopPropagation(),f.model=f.selection,t(function(){if(f.callback)return f.callback()}),f.hide()},f.select=function(n,t){if(t!=null&&typeof t.stopPropagation=="function"&&t.stopPropagation(),!n.disabled)return f.showRanged?(f.selecting=!f.selecting,f.selecting?f.start=n.date:(f.selection=i().range(f.start,n.date),f.start=null)):f.selection=i(n.date),o()},f.move=function(n,t){return t!=null&&typeof t.stopPropagation=="function"&&t.stopPropagation(),f.showRanged?f.range=i().range(f.range.start.add(n,"months").startOf("month").startOf("day"),f.range.start.clone().add(2,"months").endOf("month").startOf("day")):(f.date.add(n,"months"),f.range=i().range(i(f.date).startOf("month"),i(f.date).endOf("month"))),o()},f.handlePickerClick=function(n){if(n!=null)return typeof n.stopPropagation=="function"?n.stopPropagation():void 0},f.$watch("quick",function(n){if(n&&n!==r)return f.selection=f.quick,f.selecting=!1,f.start=null,s(),o()}),f.$watch("customSelectOptions",function(n){if(typeof customSelectOptions!="undefined"&&customSelectOptions!==null)return f.quickListDefinitions=n}),l=n(angular.element(u))(f),e.append(l),e.bind("click",function(n){return n!=null&&typeof n.stopPropagation=="function"&&n.stopPropagation(),f.$apply(function(){return f.visible?f.hide():f.show()})}),c=function(){return f.$apply(function(){return f.hide()}),!0},angular.element(document).bind("click",c),f.$on("$destroy",function(){return angular.element(document).unbind("click",c)}),h(),s(),o()}}}])}).call(this);
//# sourceMappingURL=angular-date-range-picker.min.js.map
